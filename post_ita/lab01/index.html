<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Tullia Padellini">
    <meta name="description" content="Post-doc in Statistics at Sapienza University of Rome">
    <meta name="keywords" content="[still very much under construction]">

    <base href="/">
    <title>
  R - 101 · Tullia Padellini
</title>

    <link rel="canonical" href="/post_ita/lab01/">

    <link  rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
    <link rel="stylesheet" href="//cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
    <link rel="stylesheet" href="/css/style.min.css">

    <link rel="icon" type="image/png" href="/images/coding-2.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/coding.png" sizes="16x16">

    

    <meta name="generator" content="Hugo 0.39" />
  </head>

  <body>
    <main class="wrapper">
      <link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="stylesheet" href="/css/github-gist.css" rel="stylesheet" id="theme-stylesheet">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Tullia Padellini
    </a>
    
    <ul class="navigation-list float-right">
      
      <li class="navigation-item">
        <a class="navigation-link" href="/blog/">Blog</a>
      </li>
      
      <li class="navigation-item">
        <a class="navigation-link" href="/about/">About</a>
      </li>
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1>R - 101</h1>
    </header>

    <div id="introduzione-a-r" class="section level1">
<h1>Introduzione a R</h1>
<p>Queste note costituiscono un’introduzione ad R, un linguaggio di programmazione rivolto all’analisi dei dati, utilizzato in statistica e data mining. Perchè proprio R?</p>
<ul>
<li>È <strong>gratuito</strong>: contrariamente ad altri software comunemente utilizzati in ambito economico-statistico (ad esempio SAS, STATA etc), R ? <em>open-source</em>.</li>
<li>È <strong>aggiornato</strong>: quando viene presentata una nuova metodologia di analisi dei dati, molto spesso la prima implementazione ? proprio in R.</li>
<li>È <a href="http://www.business2community.com/tech-gadgets/15-highest-paying-programming-languages-2016-01559832#D4LV23bxI8FxJgAM.97"><strong>redditizio</strong></a>…</li>
</ul>
<p>Informazioni introduttive possono essere trovate su <a href="http://it.wikipedia.org/wiki/R_%28software%29">wikipedia</a> e <a href="http://www.r-project.org/about.html">r-project.org/about.html</a>.</p>
<p>Un comando in R è un’istruzione del tipo:</p>
<pre class="r"><code>print(&quot;hello, world&quot;)</code></pre>
<p>che ha come risultato:</p>
<pre><code>## [1] &quot;hello, world&quot;</code></pre>
<div id="installazione-di-r" class="section level2">
<h2>Installazione di R</h2>
<p>Sul sito <a href="https://cran.r-project.org" class="uri">https://cran.r-project.org</a> è possibile trovare i files da scaricare per l’installazione di R, oltre ad alcuni (forse anche troppo) dettagliati <a href="https://cran.r-project.org/manuals.html">manuali</a>.</p>
<div id="windows" class="section level3">
<h3>Windows</h3>
<div id="long-version" class="section level4">
<h4>Long Version</h4>
<p>Visitare il sito <a href="http://www.r-project.org/">www.r-project.org</a> e cliccare sul link <a href="http://cran.r-project.org/mirrors.html">CRAN</a> che si trova sul menu a sinistra (sotto la voce “Download, Packages”). Da quest’ultima pagina è possibile selezionare un <em>mirror</em> da cui scaricare R. Sotto la voce <em>Italy</em> è possibile selezionare uno dei 4 <em>mirror</em>. Supponendo di aver scelto Milano, dovremmo trovarci alla pagina <a href="http://cran.mirror.garr.it/mirrors/CRAN/" class="uri">http://cran.mirror.garr.it/mirrors/CRAN/</a>. Da qui, cliccare sul primo link: <a href="http://cran.mirror.garr.it/mirrors/CRAN/bin/windows/">Download R for Windows</a> e cliccare su <a href="http://cran.mirror.garr.it/mirrors/CRAN/bin/windows/base/">base</a> e quindi su <a href="http://cran.mirror.garr.it/mirrors/CRAN/bin/windows/base/R-3.3.1-win.exe">Download R 3.3.1 for Windows</a>. Dopo aver eseguito il file, R dovrebbe trovarsi in una cartella del tipo C:\Programmi\R\R-3.3.1\ (il percorso esatto dipende da dove si è scelto di installare il programma e dalla versione di R). Per avviarlo, cliccare su C:\Programmi\R\R-3.3.1\bin\R.exe. Normalmente, durante l’installazione vengono messi un collegamento nel menu <strong>Start</strong> di Windows e/o un’icona sul desktop.</p>
</div>
<div id="short-version" class="section level4">
<h4>Short Version</h4>
<p>Scaricare da <a href="link%20http://cran.mirror.garr.it/mirrors/CRAN/bin/windows/base/R-3.3.1-win.exe">questo link</a> l’installer di R, eseguirlo ed avviare R dal collegamento sul desktop e/o dal menu <strong>Start</strong>.</p>
</div>
</div>
<div id="linuxbsd" class="section level3">
<h3>Linux/BSD</h3>
<p><a href="https://cran.r-project.org/bin/linux/">L’installazione di R su Linux</a> dipende dalla distribuzione utilizzata:</p>
<ul>
<li><a href="https://cran.r-project.org/bin/linux/ubuntu/">Ubuntu</a></li>
<li><a href="https://cran.r-project.org/bin/linux/debian/">Debian</a></li>
<li><a href="https://cran.r-project.org/bin/linux/redhat/">RedHat</a></li>
</ul>
</div>
<div id="mac" class="section level3">
<h3>Mac</h3>
<p>Per installare R su un mac con sistema operativo successivo a <em>Snowleopard</em> è sufficiente eseguire il file scaricabile a <a href="https://cran.r-project.org/bin/macosx/R-3.3.1.pkg">questo link</a>. Per versioni anteriori di OS X, informazioni aggiuntive e files da scaricare possono essere trovati <a href="https://cran.r-project.org/bin/macosx/">qui</a>.</p>
<p>Per poter usufruire di tutte le funzionalita di R è necessario scaricare anche <a href="http://xquartz.macosforge.org/">XQuartz</a> che da OS X 10.9 (Mavericks) non è più parte del sistema operativo. Per l’utilizzo di R che faremo in questo laboratorio tuttavia questo non è richiesto.</p>
</div>
</div>
<div id="installazione-rstudio" class="section level2">
<h2>Installazione RStudio</h2>
<p>L’interfaccia di R non è esattamente <em>user-friendly</em>, è perciò consigliabile utilizzare un <a href="https://it.wikipedia.org/wiki/Integrated_development_environment">IDE</a> più intuitivo, come ad esempio RStudio. RStudio è solo un’interfaccia alternativa, è necessario installare R prima per poterlo usare. Informazioni aggiuntive su RStudio possono essere trovate su <a href="https://www.rstudio.com/" class="uri">https://www.rstudio.com/</a>. Per installare RStudio è sufficiente andare su <a href="https://www.rstudio.com/products/rstudio/download3/">questa pagina</a>, scaricare la versione relativa al proprio sistema operativo (in particolare <a href="https://download1.rstudio.org/RStudio-0.99.903.exe">questa per Windows</a>, <a href="https://download1.rstudio.org/RStudio-0.99.903.dmg">questa per Mac</a>,e <a href="https://download1.rstudio.org/rstudio-0.99.903-i386.deb">questa per Linux</a> ), eseguire il file così scaricato e seguire la procedura guidata di installazione.</p>
</div>
<div id="creare-un-progetto-in-rstudio" class="section level2">
<h2>Creare un progetto in RStudio</h2>
<p>Una delle funzioni più utili in RStudio è la creazione di progetti; questi permettono di raggruppare script, dati, history e workspaces (queste parole saranno più chiare alla fine della lezione!) in un’unica cartella. Per aprire un progetto basta andare su:</p>
<p><strong>File &gt; New project &gt;…</strong></p>
<p>A questo punto vi viene chiesto se volete crearlo su una cartella (o <em>directory</em>) già esistente o su una nuova. Potete scegliere una directory già esistente selezionandola tramite il pulsante <strong>Browse..</strong> e infine cliccate su <strong>Create project</strong>. A quel punto RStudio si posizionerà subito all’interno del nuovo progetto appena creato. Andando su:</p>
<p><strong>Tools &gt; Project Options &gt;…</strong></p>
<p>potete modificare le impostazioni del vostro specifico progetto. Qualora esse siano fissate su Default si avrà come conseguenza che si comporteranno come le impostazioni globali (<strong>Tools &gt; Global Options &gt;…</strong>) di RStudio. Per uscire dal progetto basta andare su:</p>
<p><strong>File &gt; Close project</strong></p>
</div>
</div>
<div id="r-basics" class="section level1">
<h1>R basics</h1>
<div id="apertura-calcoli-e-chiusura" class="section level2">
<h2>Apertura, calcoli e chiusura</h2>
<p>Alla sua apertura, RStudio si presenta diviso in quattro sezioni:</p>
<figure>
<img src="/./post_ita/RStudio01.tiff" alt="" width="700">
</figure>
<ol style="list-style-type: decimal">
<li><p><strong>Script</strong>: lo script è un file di testo in cui scrivere i comandi che vogliamo far eseguire ad R.</p></li>
<li><p>Possiamo distinguere due sottofinestre:</p></li>
</ol>
<ul>
<li><strong>Environment</strong>: mostra tutti gli oggetti presenti nello spazio di lavoro (anche detto <em>workspace</em>)</li>
<li><strong>History</strong>: contiene l’elenco di tutti i comandi eseguiti dalla console.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p><strong>Console</strong>: qui vengono eseguiti i comandi di R e vengono mostrati i risultati. Nella console troverete il “prompt” presente sulla console e indicato (di default) da “&gt;” che è il segnale di inizio per poter scrivere le istruzioni.</p></li>
<li>Possiamo distinguere 5 sottofinestre:</li>
</ol>
<ul>
<li><strong>Files</strong>: qui troverete tutti i file della working directory, cioè della cartella dove state lavorando, questi file sono gi stessi che trovereste nella cartella visualizzandola con esplora risorse</li>
<li><strong>Plots</strong> è la finestra dove visualizzerete tutti i grafici</li>
<li><strong>Packages</strong>: questa finestra vi mostra tutti i “pacchetti” installati e vi permette di installarne altri</li>
<li><strong>Help</strong>: la finestra “amica”, in essa infatti visualizzerete un aiuto (in inglese) per le istruzioni che userete</li>
<li><strong>Viewer</strong>: una finestra per funzioni avanzate che non utilizzeremo in questo corso.</li>
</ul>
<p>Il motivo per cui utilizziamo R o un qualunque software statistico è delegare a lui calcoli che non sappiamo (o vogliamo) eseguire noi. Iniziamo a vedere cosa significa che R “esegue calcoli” partendo dal caso più semplice possibile, ossia le operazioni arimetiche:</p>
<pre class="r"><code>2+2</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>3*4</code></pre>
<pre><code>## [1] 12</code></pre>
<pre class="r"><code>5*7-2</code></pre>
<pre><code>## [1] 33</code></pre>
<p>Esistono anche funzioni di R per operazioni più complesse come radice quadrata o logaritmo, ad esempio:</p>
<pre class="r"><code>sqrt(16)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>log(1)</code></pre>
<pre><code>## [1] 0</code></pre>
<p><em>sqrt()</em> e <em>log()</em> sono due funzioni. In R, le funzioni sono scritte come <strong>nome(argomento)</strong> dove <em>nome</em> è il nome della funzione e <em>argomento</em> (racchiuso tra parentesi tonde) è il valore in cui viene calcolata. Ad esempio, in <strong>sqrt(16)</strong> la funzione è <em>sqrt()</em> e l’argomento è <em>16</em>, mentre in <strong>log(1)</strong> la funzione è <em>log()</em> e l’argomento <em>1</em>.</p>
<p>Per capire come usare una funzione possiamo servirci dei comandi <strong>help()</strong> e <strong>help.search()</strong> che servono ad aprire la documentazione di supporto. Usiamo la funzione <strong>help()</strong> quando conosciamo il nome di una funzione ma non sappiamo come lavori o cosa faccia di preciso, ad esempio <strong>help(sqrt)</strong> ci fornisce informazioni su come usare <strong>sqrt</strong>. Usiamo la funzione <strong>help.searc()</strong> quando sappiamo <em>cosa</em> vogliamo ottenere ma non <em>come</em>. Ad esempio supponiamo di voler calcolare il logaritmo di un numero ma di non conoscere la funzione <strong>log()</strong>, la funzione <strong>help.searc(“logarithm”)</strong> ci permette di trovare la funzione che ci serve. Osserviamo che quando utilizziamo <strong>help.search()</strong>, l’argomento della nostra ricerca deve essere indicato tra virgolette.</p>
<pre class="r"><code>help(sqrt)
??sqrt

help.search(&quot;logarithm&quot;)</code></pre>
<p>Il risultato di un’operazione può essere salvato in R in modo tale da essere richiamato senza dover rieseguire tutti i calcoli. R permette infatti di assegnare l’output di un’operazione ad un oggetto, come illustrato di seguito:</p>
<pre class="r"><code>x = 2+2
x</code></pre>
<pre><code>## [1] 4</code></pre>
<p>L’operazione appena effettuata viene chiamata assegnazione. Diciamo che il valore 2+2 è stato assegnato alla variabile x. Da questo momento in poi possiamo richiamare la variabile x se vogliamo evitare di ricalcolare 2+2. In questo esempio può sembrare quasi superfluo, ma le cose cambiano se cominciate a considerare quantità come</p>
<pre class="r"><code>(log(10)*2+sqrt(5))/4*cos(2*pi/3 + 1)</code></pre>
<p>In R ci sono più modi per effettuare un’assegnazione, in particolare i seguenti comandi sono equivalenti:</p>
<pre class="r"><code>x = 10
assign (&quot;x&quot;, 10)
x &lt;- 10
10 -&gt; x</code></pre>
<p>Osserviamo che una volta creata tramite assegnazione, la variabile <em>x</em> è presente nel <em>Global Environment</em>, ed appare nel riquadro in alto a destra.</p>
<p><strong>NB:</strong> R è case sensitive, quindi fa distinzione tra x e X. R non considera invece lo spazio, quindi i comandi:</p>
<pre class="r"><code>x=10 
x = 10
x    =    10</code></pre>
<p>sono per lui equivalenti. L’utilizzo di spazi può aiutare a rendere il codice più intellegibile; <a href="http://adv-r.had.co.nz/Style.html">qui</a> è possibile trovare alcune linee guida per scrivere codice comprensibile.</p>
<p>Esistono tre principali tipi di variabili:</p>
<ol style="list-style-type: decimal">
<li>numerico (<em>numeric</em>)</li>
<li>testuale (<em>character</em>)</li>
<li>logico (<em>logical</em>)</li>
</ol>
<pre class="r"><code>var1 = 5
mode(var1) </code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>La funzione mode ci permette di stabilire il tipo di una variabile. Ricordatevi che per sapere cosa fa una funzione si può usare il comando di help:</p>
<pre class="r"><code>?mode
help(mode)</code></pre>
<p>Esempi di variabili <em>character</em> e <em>logical</em> sono invece:</p>
<pre class="r"><code>var2 = &quot;testo&quot;
mode(var2)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="r"><code>var3 = TRUE
mode(var3)</code></pre>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<p>Le variabili <em>logical</em> possono assumere tre valori <em>TRUE</em>, <em>FALSE</em> e <em>NA</em>.</p>
<p><strong>NB:</strong> <em>FALSE</em> è logico mentre <em>“FALSE”</em> è testuale</p>
</div>
<div id="vettori" class="section level2">
<h2>Vettori</h2>
<div id="definizione-di-vettore" class="section level4">
<h4>Definizione di vettore</h4>
<p>I vettori sono collezioni di elementi. Per creare un vettore usiamo la funzione c():</p>
<pre class="r"><code>vect1 = c(1,2,3)
vect1</code></pre>
<pre><code>## [1] 1 2 3</code></pre>
<p>Un vettore è dunque costruito “concatenando” diversi elementi (c sta infatti per <em>concatenate</em>).</p>
<pre class="r"><code>vect2 = c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;)
vect2</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<pre class="r"><code>vect3 = c(TRUE, TRUE, FALSE)
vect3</code></pre>
<pre><code>## [1]  TRUE  TRUE FALSE</code></pre>
<p>Anche i vettori hanno dei tipi, in particolare è immediato vedere che:</p>
<ul>
<li>se tutti gli elementi sono numeric, il vettore è numeric:</li>
</ul>
<pre class="r"><code>mode(vect1) </code></pre>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<ul>
<li>se tutti gli elementi sono character il vettore è character:</li>
</ul>
<pre class="r"><code>mode(vect2)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<ul>
<li>se tutti gli elementi sono logical il vettore è logical:</li>
</ul>
<pre class="r"><code>mode(vect3)</code></pre>
<pre><code>## [1] &quot;logical&quot;</code></pre>
<p>E se gli elementi fossero di tipi diversi? Un vettore è una collezione <em>omogenea</em>, ossia R assume che tutti i suoi elementi siano dello stesso tipo, anche se questo non è vero:</p>
<pre class="r"><code>vect4 = c(1,&quot;stringa&quot;, 4, FALSE)
vect4</code></pre>
<pre><code>## [1] &quot;1&quot;       &quot;stringa&quot; &quot;4&quot;       &quot;FALSE&quot;</code></pre>
<pre class="r"><code>mode(vect4)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Altri comandi per costruire vettori sono:</p>
<pre class="r"><code>vect5 = 1:10 # crea una sequenza da 1 a 10
vect5</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<pre class="r"><code>vect6 = seq(from=1, to=10, by=0.5)  # crea una sequenza da 1 a 10 con passo 0.5
vect6</code></pre>
<pre><code>##  [1]  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5  7.0  7.5
## [15]  8.0  8.5  9.0  9.5 10.0</code></pre>
<p>è possibile creare un vettore concatenando due o più vettori, ad esempio:</p>
<pre class="r"><code>vect7 = c(vect2, vect4)
vect7</code></pre>
<pre><code>## [1] &quot;a&quot;       &quot;b&quot;       &quot;c&quot;       &quot;d&quot;       &quot;1&quot;       &quot;stringa&quot; &quot;4&quot;      
## [8] &quot;FALSE&quot;</code></pre>
<table style="width:92%;">
<colgroup>
<col width="33%" />
<col width="58%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"><strong>Piccola Prova</strong><br />
</td>
<td align="left">Costruire un vettore con il comando rep e commentare il tipo di oggetto ottenuto. Usate i comandi ? o help() per capire come funziona la funzione rep</td>
</tr>
</tbody>
</table>
</div>
<div id="funzioni-per-vettori" class="section level4">
<h4>Funzioni per vettori</h4>
<p>L’operatore che permette di selezionare un elemento all’interno di una collezione <em>A</em> di elementi è la parentesi quadra. Il comando <em>A[ pos ]</em> estrae da <em>A</em> l’elemento di posizione <em>pos</em>. Ad esempio, nel caso del vettore <em>vect7</em> che ricordiamo essere</p>
<pre><code>## [1] &quot;a&quot;       &quot;b&quot;       &quot;c&quot;       &quot;d&quot;       &quot;1&quot;       &quot;stringa&quot; &quot;4&quot;      
## [8] &quot;FALSE&quot;</code></pre>
<p>il comando</p>
<pre class="r"><code>vect7[2]</code></pre>
<pre><code>## [1] &quot;b&quot;</code></pre>
<p>permette di selezionare il secondo elemento del vettore <em>vect7</em>.</p>
<p>Osserviamo che è possibile selezionare più di un elemento alla volta, ad esempio:</p>
<pre class="r"><code>vect7[4:7] </code></pre>
<pre><code>## [1] &quot;d&quot;       &quot;1&quot;       &quot;stringa&quot; &quot;4&quot;</code></pre>
<p>seleziona quarto, quinto, sesto e settimo elemento, mentre</p>
<pre class="r"><code>vect7[c(1,7)]</code></pre>
<pre><code>## [1] &quot;a&quot; &quot;4&quot;</code></pre>
<p>seleziona primo e settimo elemento.</p>
<p>Possiamo usare anche condizioni logiche per selezionare elementi in un vettore, ad esempio:</p>
<pre class="r"><code>vect6[vect6&gt;4]</code></pre>
<pre><code>##  [1]  4.5  5.0  5.5  6.0  6.5  7.0  7.5  8.0  8.5  9.0  9.5 10.0</code></pre>
<p>Funzioni utili per vettori sono:</p>
<ul>
<li><em>lenght()</em>: conta il numero di elementi nel vettore</li>
</ul>
<pre class="r"><code>length(vect7)     </code></pre>
<pre><code>## [1] 8</code></pre>
<ul>
<li><em>sum()</em>: somma gli elementi di un vettore (<strong>NB:</strong> vale solo per vettori numerici)</li>
</ul>
<pre class="r"><code>sum(vect6)  </code></pre>
<pre><code>## [1] 104.5</code></pre>
<ul>
<li><em>prod()</em>: moltiplica gli elementi di un vettore (<strong>NB:</strong> vale solo per vettori numerici)</li>
</ul>
<pre class="r"><code>prod(vect6)       </code></pre>
<pre><code>## [1] 4.640392e+12</code></pre>
<ul>
<li>prodotto di un vettore per uno scalare</li>
</ul>
<pre class="r"><code>4*vect6           </code></pre>
<pre><code>##  [1]  4  6  8 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40</code></pre>
<ul>
<li>somma di due vettori ( <strong>NB:</strong> vale solo per vettori numerici)</li>
</ul>
<pre class="r"><code>c(1,1,1) + c(2,3,4)</code></pre>
<pre><code>## [1] 3 4 5</code></pre>
<p>R permette di sommare anche vettori di lunghezza diversa:</p>
<pre class="r"><code>vect5 + vect6</code></pre>
<pre><code>## Warning in vect5 + vect6: longer object length is not a multiple of shorter
## object length</code></pre>
<pre><code>##  [1]  2.0  3.5  5.0  6.5  8.0  9.5 11.0 12.5 14.0 15.5  7.0  8.5 10.0 11.5
## [15] 13.0 14.5 16.0 17.5 19.0</code></pre>
<p>ma è importante però notare che R produce un <em>warning</em> quando proviamo a farlo. Un <em>warning</em> vuol dire che R ha effettuato l’operazione ma in modo “creativo”. Più precisamente, per sommare i due vettori, R ha effettuato un <em>riciclaggio</em>, ossia ha riutilizzare gli elementi dell’oggetto la cui dimensione è inferiore in modo che la dimensione di tutti gli oggetti coinvolti sia la stessa.</p>
</div>
<div id="un-po-di-statistica" class="section level4">
<h4>Un po’ di statistica</h4>
<p>Vediamo adesso alcune delle funzioni base dell’analisi statistica. Supponiamo di aver osservato un campione: . Funzioni utili:</p>
<ul>
<li><em>min()</em>: calcola il valore minimo</li>
</ul>
<pre class="r"><code>min(campione)</code></pre>
<pre><code>## [1] 5.4</code></pre>
<ul>
<li><em>max()</em>: calcola il valore massimo</li>
</ul>
<pre class="r"><code>max(campione)</code></pre>
<pre><code>## [1] 92.3</code></pre>
<ul>
<li><em>mean()</em>: calcola la media</li>
</ul>
<pre class="r"><code>mean(campione)</code></pre>
<pre><code>## [1] 55.95</code></pre>
<ul>
<li><em>median()</em>: calcola la mediana</li>
</ul>
<pre class="r"><code>median(campione)  </code></pre>
<pre><code>## [1] 62.5</code></pre>
<ul>
<li><em>range()</em>: restituisce un vettore di due elementi, il min e max</li>
</ul>
<pre class="r"><code>range(campione)</code></pre>
<pre><code>## [1]  5.4 92.3</code></pre>
<ul>
<li><em>sd()</em>: calcola la deviazione standard</li>
</ul>
<pre class="r"><code>sd(campione)</code></pre>
<pre><code>## [1] 29.23819</code></pre>
<ul>
<li><em>var()</em>: calcola la varianza (corretta)</li>
</ul>
<pre class="r"><code>var(campione)</code></pre>
<pre><code>## [1] 854.8717</code></pre>
<table style="width:94%;">
<colgroup>
<col width="33%" />
<col width="61%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left">Piccola Prova<br />
</td>
<td>Calcolare a mano utilizzando le funzioni sum e length la media, la varianza e la varianza corretta del campione.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="matrici" class="section level2">
<h2>Matrici</h2>
<p>Una matrice <em>n k</em> è una collezione di elementi composta da <em>n</em> righe e <em>k</em> colonne; intuitivamente può essere interpretato come <em>n</em> vettori di lunghezza <em>k</em> messi per riga o <em>k</em> vettori di lunghezza <em>n</em> affiancati per colonna. In R possiamo definire una matrice in diversi modi:</p>
<ol style="list-style-type: decimal">
<li>direttamente attraverso il comando <em>matrix</em></li>
</ol>
<pre class="r"><code>mat1 = matrix(data=c(1:12), nrow=4, ncol=3, byrow =FALSE) 
mat1</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<p>dove <em>nrow</em> e <em>ncol</em> rappresentano il numero di righe e colonne rispettivamente <em>mat1</em>.</p>
<ol start="2" style="list-style-type: decimal">
<li>concatenando righe con il comando <em>rbind</em></li>
</ol>
<pre class="r"><code>mat2 = rbind(vect1, 5:7) 
mat2</code></pre>
<pre><code>##       [,1] [,2] [,3]
## vect1    1    2    3
##          5    6    7</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>concatenando colonne con il comando <em>cbind</em></li>
</ol>
<pre class="r"><code>mat3 = cbind(vect1, 5:7)
mat3</code></pre>
<pre><code>##      vect1  
## [1,]     1 5
## [2,]     2 6
## [3,]     3 7</code></pre>
<p>Per determinare le dimensioni di una matrice usiamo il comando <em>dim()</em>:</p>
<pre class="r"><code>dim(mat1)</code></pre>
<pre><code>## [1] 4 3</code></pre>
<pre class="r"><code>dim(mat2)</code></pre>
<pre><code>## [1] 2 3</code></pre>
<pre class="r"><code>dim(mat3)</code></pre>
<pre><code>## [1] 3 2</code></pre>
<p>Per selezionare un particolare elemento di una matrice usiamo ancora le parentesi quadre <em>[ ]</em>, ma, mentre nel caso di un vettore c’era un solo indice di posizione (il <em>posto</em> dell’elemento nel vettore), nella matrice ce ne sono due, un indice di riga e uno di colonna. Per selezionare il generico elemento di riga <em>i</em> e colonna <em>j</em> dobbiamo specificare entrambi, separati da una virgola, ossia <em>[riga, colonna]</em>. Ad esempio</p>
<pre class="r"><code>mat1[1,2]</code></pre>
<pre><code>## [1] 5</code></pre>
<p>seleziona l’elemento all’incrocio tra la prima riga e la seconda colonna.</p>
<p>Se specifichiamo l’indice di riga ma non quello di colonna, ad esempio</p>
<pre class="r"><code>mat1[1,]</code></pre>
<p>R restituisce l’intera prima riga (che non ò altro che l’intersezione della prima riga con <em>tutte</em> le colonne). Analogamente, se specifichiamo solo l’indice di colonna, ad esempio 2, R ci restituirà l’intera seconda colonna</p>
<pre class="r"><code>mat1[1,]</code></pre>
<pre><code>## [1] 1 5 9</code></pre>
<pre class="r"><code>mat1[,2]</code></pre>
<pre><code>## [1] 5 6 7 8</code></pre>
<p><strong>NB</strong>: Anche se uno dei due indici è lasciato vuoto, le due posizioni devono sempre essere separate dalla virgola.</p>
<p>Operazioni utili per le matrici sono:</p>
<ul>
<li>Trasposizione</li>
</ul>
<pre class="r"><code>t(mat1)        </code></pre>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]    1    2    3    4
## [2,]    5    6    7    8
## [3,]    9   10   11   12</code></pre>
<ul>
<li>Somma tra matrici (<strong>NB</strong>: contrariamente al caso dei vettori, non è possibile sommare matrici di dimensioni diverse)</li>
</ul>
<pre class="r"><code>mat1+mat1       </code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    2   10   18
## [2,]    4   12   20
## [3,]    6   14   22
## [4,]    8   16   24</code></pre>
<ul>
<li>Moltiplicazione di una matrice per uno scalare</li>
</ul>
<pre class="r"><code>4*mat1</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    4   20   36
## [2,]    8   24   40
## [3,]   12   28   44
## [4,]   16   32   48</code></pre>
<ul>
<li>Determinante ()</li>
</ul>
<pre class="r"><code>det(mat1)       </code></pre>
<ul>
<li>Calcolo dell’inversa</li>
</ul>
<pre class="r"><code>solve(mat1)       </code></pre>
<p><strong>NB</strong>: Le ultime due operazioni producono un <em>Error</em>, questo vuol dire che R non ha eseguito l’istruzione che gli abbiamo fornito e ci informa di quale sia il motivo (in questo caso il problema è che non si possono calcolare determinante o inversa di una matrice non quadrata)</p>
<pre class="r"><code>newmat = matrix(c(2,3,5.3,2,4,6,7,3,2), nrow=3, ncol=3)
newmat</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]  2.0    2    7
## [2,]  3.0    4    3
## [3,]  5.3    6    2</code></pre>
<pre class="r"><code>solve(newmat)</code></pre>
<pre><code>##            [,1]       [,2]        [,3]
## [1,]  0.4424779 -1.6814159  0.97345133
## [2,] -0.4380531  1.4646018 -0.66371681
## [3,]  0.1415929  0.0619469 -0.08849558</code></pre>
<pre class="r"><code>det(newmat)</code></pre>
<pre><code>## [1] -22.6</code></pre>
<p>Analogamente a quanto abbiamo visto per i vettori, anche le matrici sono collezioni omogenee, ossia R considera tutti gli elementi di una matrice dello stesso tipo.</p>
<pre class="r"><code>riga1 = c(0,2,4)
riga2 = c(6,5,&quot;a&quot;)
mat4 = rbind(riga1, riga2)
mat4</code></pre>
<pre><code>##       [,1] [,2] [,3]
## riga1 &quot;0&quot;  &quot;2&quot;  &quot;4&quot; 
## riga2 &quot;6&quot;  &quot;5&quot;  &quot;a&quot;</code></pre>
<pre class="r"><code>mode(mat4)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
</div>
<div id="dataframes" class="section level2">
<h2>Dataframes</h2>
</div>
</div>
<div id="dataframes-1" class="section level1">
<h1>Dataframes ————————————————————–</h1>
<p>I dataframes sono generalizzazioni delle matrici che permettono di considerare elementi di natura diversa.In sostanza un dataframe è una matrice in cui ogni colonna rappresenta una diversa variabile e come tale può avere tipo diverso.</p>
<p>Per capire meglio questo concetto, analizziamo la costruzione di un dataframe:</p>
<pre class="r"><code>nome      = c(&quot;Marco&quot;, &quot;Giulio&quot;, &quot;Livia&quot;, &quot;Gaia&quot;, &quot;Carlo&quot;)
altezza   = c(1.82, 1.77, 1.70, NA, 1.94)
fuorisede = c(TRUE, FALSE, FALSE, FALSE, TRUE)
fratelli  = c(0, 0, 2, 1, 0)

df = data.frame(nome, altezza, fuorisede, fratelli)
df</code></pre>
<pre><code>##     nome altezza fuorisede fratelli
## 1  Marco    1.82      TRUE        0
## 2 Giulio    1.77     FALSE        0
## 3  Livia    1.70     FALSE        2
## 4   Gaia      NA     FALSE        1
## 5  Carlo    1.94      TRUE        0</code></pre>
<p>Il dataframe <em>df</em> contiene tutte le informazioni sul campione considerato; le sue righe rappresentano le unità campionarie (i vari intervistati), mentre le colonne rappresentano le variabili di interesse. È facile capire che il dataframe è l’oggetto principe nelle analisi statistiche con R. Il dataframe <em>df</em> è stato creato combinando oggetti di tipo diverso (<em>nome</em> è character, <em>altezza</em> è numeric, <em>fuorisede</em> è logical etc), che rimangono di tipo diverso. Per studiare la struttura di un dataframe usiamo il comando str()</p>
<pre class="r"><code>str(df)</code></pre>
<pre><code>## &#39;data.frame&#39;:    5 obs. of  4 variables:
##  $ nome     : Factor w/ 5 levels &quot;Carlo&quot;,&quot;Gaia&quot;,..: 5 3 4 2 1
##  $ altezza  : num  1.82 1.77 1.7 NA 1.94
##  $ fuorisede: logi  TRUE FALSE FALSE FALSE TRUE
##  $ fratelli : num  0 0 2 1 0</code></pre>
<p>La prima cosa che ci dice è che l’oggetto df è un dataframe. In particolare questo dataframe è composto da 5 osservazioni di 4 variabili (<em>nome</em>,<em>altezza</em>,<em>fuorisede</em> e <em>fratelli</em>) che vediamo precedute da un segno di dollaro, $.</p>
<p>Il dollaro viene utilizzato per estrarre una variabile da un dataframe, ad esempio se vogliamo solo l’altezza:</p>
<pre class="r"><code>df$altezza</code></pre>
<pre><code>## [1] 1.82 1.77 1.70   NA 1.94</code></pre>
<p>Ci sono altri modi per estrarre la stesse variabile dal dataframe, in particolare:</p>
<pre class="r"><code>df[,2]    # tutte le righe della seconda colonna, quella dell&#39;altezza</code></pre>
<pre><code>## [1] 1.82 1.77 1.70   NA 1.94</code></pre>
<pre class="r"><code>df[2]     # se è specificato un solo valore tra parentesi quadre nel caso dei dataframe è la colonna</code></pre>
<pre><code>##   altezza
## 1    1.82
## 2    1.77
## 3    1.70
## 4      NA
## 5    1.94</code></pre>
<pre class="r"><code>df[&quot;altezza&quot;]</code></pre>
<pre><code>##   altezza
## 1    1.82
## 2    1.77
## 3    1.70
## 4      NA
## 5    1.94</code></pre>
<p>Naturalmente possiamo voler estrarre anche le righe (o unità) del dataframe:</p>
<pre class="r"><code>df[1,] # estrae la prima riga</code></pre>
<pre><code>##    nome altezza fuorisede fratelli
## 1 Marco    1.82      TRUE        0</code></pre>
<pre class="r"><code>df[c(1,3),] # estrae la prima e la terza</code></pre>
<pre><code>##    nome altezza fuorisede fratelli
## 1 Marco    1.82      TRUE        0
## 3 Livia    1.70     FALSE        2</code></pre>
<pre class="r"><code>df[c(TRUE, TRUE, FALSE, FALSE, FALSE),] # estrae la prima e la seconda</code></pre>
<pre><code>##     nome altezza fuorisede fratelli
## 1  Marco    1.82      TRUE        0
## 2 Giulio    1.77     FALSE        0</code></pre>
<p>Grazie ai dataframes è facile selezionare sottocampioni che soddisfino una data proprietà. Supponiamo ad esempio di voler studiare solo la sottopopolazione degli “alti” ossia tutti gli individui del campione di altezza superiore a 1.80, ossia tutti quelli per cui è vera la seguente condizione logica</p>
<pre class="r"><code>df[&quot;altezza&quot;]&gt;1.80</code></pre>
<pre><code>##      altezza
## [1,]    TRUE
## [2,]   FALSE
## [3,]   FALSE
## [4,]      NA
## [5,]    TRUE</code></pre>
<p>Il comando <em>df[“altezza”]&gt;1.80</em> ci restituisce un vettore di <em>TRUE</em>, <em>FALSE</em> che possiamo utilizzare per estrarre solo alcune righe da <em>df</em></p>
<pre class="r"><code>df[df[&quot;altezza&quot;]&gt;1.80,]</code></pre>
<pre><code>##     nome altezza fuorisede fratelli
## 1  Marco    1.82      TRUE        0
## NA  &lt;NA&gt;      NA        NA       NA
## 5  Carlo    1.94      TRUE        0</code></pre>
<p>Se invece fossimo interessati alla sottopopolazione dei figli unici, ossia tutti gli individui per cui è valida la condizione logica fratelli == 0 è sufficiente considerare</p>
<pre class="r"><code>df[ df$fratelli == 0,]</code></pre>
<pre><code>##     nome altezza fuorisede fratelli
## 1  Marco    1.82      TRUE        0
## 2 Giulio    1.77     FALSE        0
## 5  Carlo    1.94      TRUE        0</code></pre>
<p>Osserviamo che per un dataframe valgono tutte le operazioni definite per una matrice.</p>
<pre class="r"><code>df[1,2]</code></pre>
<pre><code>## [1] 1.82</code></pre>
<pre class="r"><code>dim(df)</code></pre>
<pre><code>## [1] 5 4</code></pre>
<pre class="r"><code>df+df</code></pre>
<pre><code>## Warning in Ops.factor(left, right): &#39;+&#39; not meaningful for factors</code></pre>
<pre><code>##   nome altezza fuorisede fratelli
## 1   NA    3.64         2        0
## 2   NA    3.54         0        0
## 3   NA    3.40         0        4
## 4   NA      NA         0        2
## 5   NA    3.88         2        0</code></pre>
<p>Altre informazioni su di un dataframe:</p>
<pre class="r"><code>summary(df)</code></pre>
<pre><code>##      nome      altezza      fuorisede          fratelli  
##  Carlo :1   Min.   :1.700   Mode :logical   Min.   :0.0  
##  Gaia  :1   1st Qu.:1.752   FALSE:3         1st Qu.:0.0  
##  Giulio:1   Median :1.795   TRUE :2         Median :0.0  
##  Livia :1   Mean   :1.808                   Mean   :0.6  
##  Marco :1   3rd Qu.:1.850                   3rd Qu.:1.0  
##             Max.   :1.940                   Max.   :2.0  
##             NA&#39;s   :1</code></pre>
<div id="liste" class="section level3">
<h3>Liste</h3>
<p>Le liste sono una generalizzazione dei vettori al caso di elementi complessi. In sostanza una lista è un vettore dove ciascun elemento può essere un qualunque oggetto, ad esempio una matice, un vettore o anche un dataframe.</p>
<p>Una lista può essere creata con il comando list():</p>
<pre class="r"><code>lista1 = list(a=mat1, b=df, c=vect1, d=var3)</code></pre>
<p>Per una lista valgono molti dei comandi già visti per dataframes, in particolare:</p>
<ul>
<li>str() ci permette di studiarne la struttura:</li>
</ul>
<pre class="r"><code>str(lista1)</code></pre>
<pre><code>## List of 4
##  $ a: int [1:4, 1:3] 1 2 3 4 5 6 7 8 9 10 ...
##  $ b:&#39;data.frame&#39;:   5 obs. of  4 variables:
##   ..$ nome     : Factor w/ 5 levels &quot;Carlo&quot;,&quot;Gaia&quot;,..: 5 3 4 2 1
##   ..$ altezza  : num [1:5] 1.82 1.77 1.7 NA 1.94
##   ..$ fuorisede: logi [1:5] TRUE FALSE FALSE FALSE TRUE
##   ..$ fratelli : num [1:5] 0 0 2 1 0
##  $ c: num [1:3] 1 2 3
##  $ d: logi TRUE</code></pre>
<ul>
<li>$variabile ci permette di estrarre un elemento:</li>
</ul>
<pre class="r"><code>lista1$a</code></pre>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
</div>
<div id="importare-dati" class="section level2">
<h2>Importare Dati</h2>
<p>In R i dati esterni vengono caricati in due modi:</p>
<ol style="list-style-type: decimal">
<li><p>(versione facile) utilizzando il comando “import dataset” nel pannello environment in alto a destra.</p></li>
<li><p>(versione difficile) utilizzando la funzione read.table() o read.csv().</p></li>
</ol>
<p>Queste due funzioni sono assolutamente equivalenti (quindi useremo sempre la prima).</p>
<p>Proviamo ora ad importare il file Mc_data.csv, per rendere l’operazione più semplice, è comodo spostare il file che vogliamo caricare nella cartella dove stiamo lavorando (ossia quella del progetto).</p>
<pre class="r"><code>mc_data = read.csv(&quot;Mc_data.csv&quot;)</code></pre>
<p>Per capire che in che tipo di oggetto sono stati importati in R i dati possiamo:</p>
<ul>
<li>andare per tentativi, utilizzando la funzione is.</li>
</ul>
<pre class="r"><code>is.vector(mc_data)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>is.matrix(mc_data)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<pre class="r"><code>is.data.frame(mc_data)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>is.list(mc_data)</code></pre>
<pre><code>## [1] TRUE</code></pre>
<ul>
<li>utilizzare la funzione class:</li>
</ul>
<pre class="r"><code>class(mc_data)</code></pre>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p><em>mc_data</em> è un dataframe, sappiamo dunque che informazioni utili possono essere estratte con:</p>
<pre class="r"><code>str(mc_data)</code></pre>
<pre><code>## &#39;data.frame&#39;:    81 obs. of  17 variables:
##  $ X                : Factor w/ 81 levels &quot;Angus Bacon &amp; Cheese&quot;,..: 1 2 3 11 59 21 29 12 28 20 ...
##  $ Serving.Size     : int  290 316 283 215 202 283 100 114 115 165 ...
##  $ Calories         : int  790 760 770 550 520 750 250 300 310 440 ...
##  $ Total.Fat..g.    : num  39 39 40 29 26 43 9 12 13 23 ...
##  $ Saturated.Fat..g.: num  18 17 17 10 12 19 3.5 6 6 11 ...
##  $ Trans.Fat..g.    : num  2 2 2 1 1.5 2.5 0.5 0.5 0.5 1.5 ...
##  $ Cholesterol..mg. : int  150 135 135 75 95 160 25 40 40 80 ...
##  $ Sodium..mg.      : int  1990 1640 1170 970 1100 1280 480 680 660 1050 ...
##  $ Carbohydrates..g.: int  63 61 59 46 41 42 31 33 33 34 ...
##  $ Dietary.Fiber..g.: int  4 4 4 3 3 3 2 2 2 2 ...
##  $ Sugars..g.       : int  13 10 8 9 10 10 6 7 7 7 ...
##  $ Protein..g.      : int  45 40 44 25 30 48 12 15 15 25 ...
##  $ Vitamin.A...DV.  : int  10 15 8 4 10 10 2 6 2 8 ...
##  $ Vitamin.C...DV.  : int  4 8 0 2 2 2 2 2 0 2 ...
##  $ Calcium....DV.   : int  30 30 40 25 30 30 10 20 20 30 ...
##  $ Iron....DV.      : int  35 35 35 25 25 35 15 15 15 20 ...
##  $ Type             : Factor w/ 6 levels &quot;Breakfast&quot;,&quot;Burgers &amp; Sandwiches&quot;,..: 2 2 2 2 2 2 2 2 2 2 ...</code></pre>
<pre class="r"><code>summary(mc_data)</code></pre>
<pre><code>##                                                   X       Serving.Size  
##  Angus Bacon &amp; Cheese                              : 1   Min.   : 29.0  
##  Angus Deluxe                                      : 1   1st Qu.:117.0  
##  Angus Mushroom &amp; Swiss                            : 1   Median :164.0  
##  Apple Slices                                      : 1   Mean   :177.6  
##  Bacon, Egg &amp; Cheese Bagel                         : 1   3rd Qu.:215.0  
##  Bacon, Egg &amp; Cheese Biscuit (Regular Size Biscuit): 1   Max.   :420.0  
##  (Other)                                           :75                  
##     Calories      Total.Fat..g.   Saturated.Fat..g. Trans.Fat..g.   
##  Min.   :  15.0   Min.   : 0.00   Min.   : 0.000    Min.   :0.0000  
##  1st Qu.: 270.0   1st Qu.: 9.00   1st Qu.: 3.000    1st Qu.:0.0000  
##  Median : 370.0   Median :16.00   Median : 5.000    Median :0.0000  
##  Mean   : 380.5   Mean   :17.56   Mean   : 6.537    Mean   :0.2407  
##  3rd Qu.: 460.0   3rd Qu.:23.00   3rd Qu.: 9.000    3rd Qu.:0.0000  
##  Max.   :1090.0   Max.   :56.00   Max.   :19.000    Max.   :2.5000  
##                                                                     
##  Cholesterol..mg.  Sodium..mg.     Carbohydrates..g. Dietary.Fiber..g.
##  Min.   :  0.00   Min.   :   0.0   Min.   :  4.00    Min.   :0.000    
##  1st Qu.: 25.00   1st Qu.: 200.0   1st Qu.: 27.00    1st Qu.:1.000    
##  Median : 45.00   Median : 700.0   Median : 34.00    Median :2.000    
##  Mean   : 76.67   Mean   : 689.8   Mean   : 39.06    Mean   :2.259    
##  3rd Qu.: 70.00   3rd Qu.: 990.0   3rd Qu.: 51.00    3rd Qu.:3.000    
##  Max.   :575.00   Max.   :2150.0   Max.   :111.00    Max.   :7.000    
##                                                                       
##    Sugars..g.     Protein..g.   Vitamin.A...DV.  Vitamin.C...DV. 
##  Min.   : 0.00   Min.   : 0.0   Min.   :  0.00   Min.   :  0.00  
##  1st Qu.: 3.00   1st Qu.: 8.0   1st Qu.:  2.00   1st Qu.:  0.00  
##  Median : 7.00   Median :15.0   Median :  6.00   Median :  2.00  
##  Mean   :13.33   Mean   :16.7   Mean   : 23.22   Mean   : 11.73  
##  3rd Qu.:14.00   3rd Qu.:23.0   3rd Qu.: 10.00   3rd Qu.:  6.00  
##  Max.   :93.00   Max.   :48.0   Max.   :160.00   Max.   :170.00  
##                                                                  
##  Calcium....DV.   Iron....DV.                      Type   
##  Min.   : 0.00   Min.   : 0.00   Breakfast           :19  
##  1st Qu.:10.00   1st Qu.: 6.00   Burgers &amp; Sandwiches:22  
##  Median :15.00   Median :10.00   Chicken             : 4  
##  Mean   :16.27   Mean   :12.86   Desserts/Shakes     :16  
##  3rd Qu.:25.00   3rd Qu.:20.00   Salads              :10  
##  Max.   :50.00   Max.   :40.00   Snacks &amp; Sides      :10  
## </code></pre>
<p>Selezioniamo solo i prodotti relativi alla colazione:</p>
<pre class="r"><code>mc_breakfast = mc_data[mc_data$Type==&quot;Breakfast&quot;,]</code></pre>
<p>Questo è ancora una volta un dataframe</p>
<pre class="r"><code>str(mc_breakfast)</code></pre>
<pre><code>## &#39;data.frame&#39;:    19 obs. of  17 variables:
##  $ X                : Factor w/ 81 levels &quot;Angus Bacon &amp; Cheese&quot;,..: 22 66 67 6 62 63 7 65 68 9 ...
##  $ Serving.Size     : int  138 114 164 140 117 163 164 141 201 269 ...
##  $ Calories         : int  300 370 450 420 430 510 410 420 550 740 ...
##  $ Total.Fat..g.    : num  12 22 27 23 27 33 18 22 31 48 ...
##  $ Saturated.Fat..g.: num  5 8 10 12 12 14 8 8 12 17 ...
##  $ Trans.Fat..g.    : num  0 0 0 0 0 0 0 0 0 0 ...
##  $ Cholesterol..mg. : int  260 45 285 240 30 250 240 35 265 555 ...
##  $ Sodium..mg.      : int  780 820 890 1130 1080 1170 1080 1030 1320 1560 ...
##  $ Carbohydrates..g.: int  30 29 30 38 34 36 48 44 48 51 ...
##  $ Dietary.Fiber..g.: int  2 2 2 2 2 2 2 2 2 3 ...
##  $ Sugars..g.       : int  3 2 2 3 2 2 15 15 15 3 ...
##  $ Protein..g.      : int  18 14 21 15 11 18 15 11 20 28 ...
##  $ Vitamin.A...DV.  : int  10 6 10 10 0 6 10 0 10 15 ...
##  $ Vitamin.C...DV.  : int  0 2 2 0 0 0 0 0 0 2 ...
##  $ Calcium....DV.   : int  30 25 30 15 6 10 20 8 20 15 ...
##  $ Iron....DV.      : int  15 15 20 15 15 20 15 10 15 25 ...
##  $ Type             : Factor w/ 6 levels &quot;Breakfast&quot;,&quot;Burgers &amp; Sandwiches&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<pre class="r"><code>summary(mc_breakfast)</code></pre>
<pre><code>##                                                   X       Serving.Size  
##  Bacon, Egg &amp; Cheese Bagel                         : 1   Min.   : 56.0  
##  Bacon, Egg &amp; Cheese Biscuit (Regular Size Biscuit): 1   1st Qu.:127.5  
##  Bacon, Egg &amp; Cheese McGriddles                    : 1   Median :151.0  
##  Big Breakfast (Regular Size Biscuit)              : 1   Mean   :170.3  
##  Big Breakfast with Hotcakes (Regular Size Biscuit): 1   3rd Qu.:188.5  
##  Cinnamon Melts                                    : 1   Max.   :420.0  
##  (Other)                                           :13                  
##     Calories    Total.Fat..g.   Saturated.Fat..g. Trans.Fat..g.    
##  Min.   : 150   Min.   : 4.50   Min.   : 1.500    Min.   :0.00000  
##  1st Qu.: 360   1st Qu.:17.00   1st Qu.: 7.000    1st Qu.:0.00000  
##  Median : 420   Median :22.00   Median : 8.000    Median :0.00000  
##  Mean   : 460   Mean   :23.55   Mean   : 8.974    Mean   :0.02632  
##  3rd Qu.: 515   3rd Qu.:27.00   3rd Qu.:12.000    3rd Qu.:0.00000  
##  Max.   :1090   Max.   :56.00   Max.   :19.000    Max.   :0.50000  
##                                                                    
##  Cholesterol..mg.  Sodium..mg.     Carbohydrates..g. Dietary.Fiber..g.
##  Min.   :  0.0    Min.   : 160.0   Min.   : 15.00    Min.   :1.000    
##  1st Qu.: 30.0    1st Qu.: 785.0   1st Qu.: 32.00    1st Qu.:2.000    
##  Median :115.0    Median :1030.0   Median : 44.00    Median :2.000    
##  Mean   :172.6    Mean   : 977.4   Mean   : 46.37    Mean   :2.579    
##  3rd Qu.:260.0    3rd Qu.:1175.0   3rd Qu.: 56.50    3rd Qu.:3.000    
##  Max.   :575.0    Max.   :2150.0   Max.   :111.00    Max.   :6.000    
##                                                                       
##    Sugars..g.      Protein..g.    Vitamin.A...DV.  Vitamin.C...DV.  
##  Min.   : 0.000   Min.   : 1.00   Min.   : 0.000   Min.   :  0.000  
##  1st Qu.: 2.000   1st Qu.:11.00   1st Qu.: 0.000   1st Qu.:  0.000  
##  Median : 3.000   Median :15.00   Median : 6.000   Median :  0.000  
##  Mean   : 9.632   Mean   :15.53   Mean   : 6.737   Mean   :  7.684  
##  3rd Qu.:15.000   3rd Qu.:19.00   3rd Qu.:10.000   3rd Qu.:  2.000  
##  Max.   :32.000   Max.   :36.00   Max.   :20.000   Max.   :130.000  
##                                                                     
##  Calcium....DV.   Iron....DV.                      Type   
##  Min.   : 0.00   Min.   : 2.00   Breakfast           :19  
##  1st Qu.: 9.00   1st Qu.:15.00   Burgers &amp; Sandwiches: 0  
##  Median :15.00   Median :15.00   Chicken             : 0  
##  Mean   :15.32   Mean   :16.42   Desserts/Shakes     : 0  
##  3rd Qu.:20.00   3rd Qu.:17.50   Salads              : 0  
##  Max.   :30.00   Max.   :40.00   Snacks &amp; Sides      : 0  
## </code></pre>
<p>Possiamo esportare questa selezione come file csv:</p>
<pre class="r"><code>write.csv(mc_breakfast, file = &quot;mc_breakfast.csv&quot;)</code></pre>
<p>Questo comando ha creato un file “mc_breakfast.csv” nella working directory. Osserviamo che questo è un file in formato .csv, per salvare gli stessi dati in un file .txt si può usare il comando write.table.</p>
</div>
<div id="salva-e-chiudi" class="section level2">
<h2>Salva e Chiudi</h2>
<p>Prima di chiudere vogliamo salvare gli oggetti definiti nel laboratorio di oggi (o in generale in una sessione di R). Per sapere quali oggetti sono presenti nell’environment possiamo guardare il pannello in alto a dx o usare il comando ls():</p>
<pre class="r"><code>ls()</code></pre>
<pre><code>##  [1] &quot;altezza&quot;      &quot;campione&quot;     &quot;df&quot;           &quot;fratelli&quot;    
##  [5] &quot;fuorisede&quot;    &quot;lista1&quot;       &quot;mat1&quot;         &quot;mat2&quot;        
##  [9] &quot;mat3&quot;         &quot;mat4&quot;         &quot;mc_breakfast&quot; &quot;mc_data&quot;     
## [13] &quot;newmat&quot;       &quot;nome&quot;         &quot;riga1&quot;        &quot;riga2&quot;       
## [17] &quot;var1&quot;         &quot;var2&quot;         &quot;var3&quot;         &quot;vect1&quot;       
## [21] &quot;vect2&quot;        &quot;vect3&quot;        &quot;vect4&quot;        &quot;vect5&quot;       
## [25] &quot;vect6&quot;        &quot;vect7&quot;        &quot;x&quot;</code></pre>
<p>Per sapere dove stiamo salvando, bisogna capire in che directory stiamo lavorando, questo può essere fatto con il comando getwd():</p>
<pre class="r"><code>getwd()</code></pre>
<pre><code>## [1] &quot;/Users/tulliapadellini/Documents/GitHub/blog/content/post_ita&quot;</code></pre>
<p>In questo caso il comando ci restituisce la cartella che abbiamo scelto quando abbiamo creato il progetto, possiamo però decidere di lavorare in un altra directory, per farlo usiamo il comando setwd():</p>
<pre class="r"><code>setwd(&#39;/Users/tulliapadellini/Dropbox (Personal)/ESERCITAZIONI ROMA III/LAB01&#39;)</code></pre>
<p>Per salvare gli oggetti presenti nell’environment globale, il workspace, possiamo usare il comando save.image(“nome_del_file.RData”).</p>
<pre class="r"><code>save.image(&quot;workspace_lab01.RData&quot;)</code></pre>
<p>Volendo possiamo anche non salvare tutti gli oggetti, ad esempio se vogliamo salvare solo vect1 e mat1 usiamo il comando:</p>
<pre class="r"><code>save(vect1, mat1, file=&#39;oggetti.RData&#39;)</code></pre>
<p>In sostanza save.image() corrisponde a save(list=ls()).</p>
<p>Al contrario per eliminare un elemento dal workspace usiamo il comando rm()</p>
<pre class="r"><code>rm(mat1)</code></pre>
<p>Verifichiamo con ls() che l’oggetto mat1 non è più presente nel workspace:</p>
<pre class="r"><code>ls()</code></pre>
<pre><code>##  [1] &quot;altezza&quot;      &quot;campione&quot;     &quot;df&quot;           &quot;fratelli&quot;    
##  [5] &quot;fuorisede&quot;    &quot;lista1&quot;       &quot;mat2&quot;         &quot;mat3&quot;        
##  [9] &quot;mat4&quot;         &quot;mc_breakfast&quot; &quot;mc_data&quot;      &quot;newmat&quot;      
## [13] &quot;nome&quot;         &quot;riga1&quot;        &quot;riga2&quot;        &quot;var1&quot;        
## [17] &quot;var2&quot;         &quot;var3&quot;         &quot;vect1&quot;        &quot;vect2&quot;       
## [21] &quot;vect3&quot;        &quot;vect4&quot;        &quot;vect5&quot;        &quot;vect6&quot;       
## [25] &quot;vect7&quot;        &quot;x&quot;</code></pre>
<p>Se vogliamo rimuovere tutti oggetti dal workspace usiamo:</p>
<pre class="r"><code>rm(list=ls()) # USARE CON CAUTELA
ls()</code></pre>
<pre><code>## character(0)</code></pre>
<p>Oltre allo script e al workspace possiamo salvare l’elenco dei comandi eseguiti, la “history” della sessione.</p>
<pre class="r"><code>savehistory(&quot;history_lab01.Rhistory&quot;)</code></pre>
<p>Come abbiamo visto prima, la history si può trovare anche nel pannello in alto a destra della finestra di R Studio. Per caricare history e workspace usiamo load():</p>
<pre class="r"><code>load(&quot;workspace_lab01.RData&quot;)
loadhistory(&quot;history_lab01.Rhistory&quot;)</code></pre>
</div>
<div id="opzionale---funzioni--" class="section level2">
<h2>Opzionale - Funzioni —————————————————-</h2>
<p>Per quanto R abbia moltissime funzioni già “pronte per l’uso” (abbiamo visto log, mean, sd, etc), non sempre è possibile trovarne una che risponda alle nostre esigenze; è utile dunque essere in grado di costruire a mano delle funzioni.</p>
<p>In R una funzione si costruisce con il comando function(). Una generica funzione si definisce come segue:</p>
<pre class="r"><code>nome_della_funzione = function( argomento della funzione ) espressione della funzione</code></pre>
<p>Iniziamo con un esempio molto semplice, la funzione quadrato:</p>
<pre class="r"><code>quadrato = function(x) x^2</code></pre>
<p>In questo caso x è l’argomento della funzione, mentre quadrato è il suo nome. L’espressione della funzione è l’argomento elevato al quadrato (^2).</p>
<p>Se vogliamo determinare il quadrato di 5, è sufficiente richiamare la funzione specificandone l’argomento:</p>
<pre class="r"><code>quadrato(5)</code></pre>
<pre><code>## [1] 25</code></pre>
<p>Naturalmente si ha anche che:</p>
<pre class="r"><code>quadrato(3)</code></pre>
<pre><code>## [1] 9</code></pre>
<p>et cetera.</p>
<p>Consideriamo ora una funzione di due elementi, x e a :</p>
<pre class="r"><code>potenza = function(x,a) x^a</code></pre>
<p>In questo caso la funzione consiste nel prendere il primo argomento ed elevarlo ad una potenza pari al secondo:</p>
<pre class="r"><code>potenza(2, 2)</code></pre>
<pre><code>## [1] 4</code></pre>
<pre class="r"><code>potenza(3, 2)</code></pre>
<pre><code>## [1] 9</code></pre>
<pre class="r"><code>potenza(3, 3)</code></pre>
<pre><code>## [1] 27</code></pre>
</div>
</div>

  </article>
</section>


      </div>

      <script src="//yihui.name/js/math-code.js"></script>
<script async
src="//cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<footer class="footer">
  <section class="container">

  <font size=1> © 2019 - Powered by <a href="https://gohugo.io/">Hugo</a> with much help from <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.</font>
    
  
    
  </section>
</footer>

    </main>

    

  </body>

</html>
